{"ast":null,"code":"import _slicedToArray from\"/Users/minhyeok/Desktop/LostarkTodo/Front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{call}from\"../service/api-service\";import'./Comments.css';import Comment from\"./Commnet\";import CommentForm from\"./CommentForm\";import Info from\"../components/Info\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Comments=function Comments(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),backendComments=_useState2[0],setBackendComments=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),currentUser=_useState4[0],setCurrentUser=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),activeComment=_useState6[0],setActiveComment=_useState6[1];var rootComments=backendComments.filter(function(backendComment){return backendComment.parentId===0;});var getReplies=function getReplies(commentId){return backendComments.filter(function(backendComment){return backendComment.parentId===commentId;}).sort(function(a,b){return new Date(a.lastModifiedDate).getTime()-new Date(b.lastModifiedDate).getTime();});};useEffect(function(){call(\"/member\",\"GET\",null).then(function(response){setCurrentUser(response);}).catch(function(error){console.log(error.errorMessage);});// 초기 캐릭터 정보 불러오기\ncall(\"/comments\",\"GET\",null).then(function(response){setBackendComments(response);}).catch(function(error){console.log(error.errorMessage);});},[]);var addComment=function addComment(text){var parentId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var updateContent={body:text,parentId:parentId};call(\"/comments\",\"POST\",updateContent).then(function(response){setBackendComments(response);setActiveComment(null);}).catch(function(error){console.log(error.errorMessage);});};var updateComment=function updateComment(text,commentId){var updateContent={body:text,id:commentId};call(\"/comments\",\"PATCH\",updateContent).then(function(response){setBackendComments(response);setActiveComment(null);}).catch(function(error){console.log(error.errorMessage);});};var deleteComment=function deleteComment(commentId){var updateContent={id:commentId};if(window.confirm(\"삭제하시겠습니까?\")){call(\"/comments\",\"DELETE\",updateContent).then(function(response){setBackendComments(response);}).catch(function(error){console.log(error.errorMessage);});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"comments\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0},children:\"2023.10.01\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"\\uCE90\\uB9AD\\uD130 \\uC5C5\\uB370\\uC774\\uD2B8 \\uAE30\\uB2A5\\uC774 \\uC218\\uC815\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(\"br\",{}),\"\\uD654\\uBA74 \\uC624\\uB978\\uCABD \\uD558\\uB2E8 \\\"+\\\"\\uBC84\\uD2BC\\uC5D0\\uC11C \\uC0AC\\uC6A9\\uD558\\uC2E4 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4\",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(Info,{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uAC1C\\uBC1C \\uC608\\uC815\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"\\uC8FC\\uAC04 \\uC5D0\\uD3EC\\uB098, \\uD1A0\\uBC8C\\uC804 \\uB4F1 \\uC6D0\\uC815\\uB300 \\uB2E8\\uC704 \\uC219\\uC81C \\uCD94\\uAC00\"})}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"2\\uC8FC \\uCFE8\\uD0C0\\uC784 \\uB808\\uC774\\uB4DC \\uCCB4\\uD06C\"}),\" - \\uC0AC\\uB78C\\uB4E4\\uB9C8\\uB2E4 \\uD50C\\uB808\\uC774\\uD558\\uB294 \\uBC29\\uC2DD\\uC774 \\uB2EC\\uB77C, \\uCD5C\\uB300\\uD55C \\uB9CE\\uC740 \\uBD84\\uB4E4\\uC758 \\uC694\\uAD6C\\uC0AC\\uD56D\\uC744 \\uB9CC\\uC871\\uD560 \\uC218 \\uC788\\uACE0 \\uD3B8\\uD558\\uAC8C \\uC4F0\\uC2E4 \\uC218 \\uC788\\uB294 \\uBC29\\uBC95\\uC744 \\uACE0\\uC548\\uC911\\uC785\\uB2C8\\uB2E4.(\\uC880 \\uAC78\\uB9B4\\uAC83 \\uAC19\\uC2B5\\uB2C8\\uB2E4..\\u3160\\u3160) \"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uAE30\\uB85D\\uB0A8\\uAE30\\uAE30\"}),\" - \\uC219\\uC81C\\uB85C \\uC5BB\\uC740 \\uC218\\uC775\\uC744 \\uAE30\\uB85D\\uD558\\uC5EC \\uADF8\\uB798\\uD504 \\uD639\\uC740 \\uD45C\\uB85C \\uBCFC \\uC218\\uC788\\uAC8C \\uD558\\uB824\\uACE0 \\uD569\\uB2C8\\uB2E4. \"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uB370\\uC774\\uD130\\uBCF4\\uAE30\"}),\" - \\uC77C\\uC77C\\uC219\\uC81C\\uB85C \\uC5BB\\uB294 \\uC7AC\\uD654\\uB7C9 \\uD1B5\\uACC4\\uC640 \\uD604\\uC7AC \\uACBD\\uB9E4\\uC7A5 \\uC2DC\\uC138\\uB97C \\uD655\\uC778\\uD560 \\uC218 \\uC788\\uAC8C \\uD558\\uB824\\uACE0 \\uD569\\uB2C8\\uB2E4. \"]})]})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"comments-title\",children:\"\\uBC29\\uBA85\\uB85D\"}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-form-title\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uD558\\uACE0\\uC2F6\\uC73C\\uC2E0 \\uB9D0\\uC500 \\uB0A8\\uACA8\\uC8FC\\uC2DC\\uBA74 \\uB429\\uB2C8\\uB2E4\"})}),/*#__PURE__*/_jsx(CommentForm,{submitLabel:\"Write\",handleSubmit:addComment}),/*#__PURE__*/_jsx(\"div\",{className:\"comments-container\",children:rootComments.map(function(rootComment){return/*#__PURE__*/_jsx(Comment,{comment:rootComment,replies:getReplies(rootComment.id),activeComment:activeComment,setActiveComment:setActiveComment,addComment:addComment,deleteComment:deleteComment,updateComment:updateComment,currentUser:currentUser},rootComment.id);})})]});};export default Comments;","map":{"version":3,"names":["useState","useEffect","call","Comment","CommentForm","Info","jsx","_jsx","jsxs","_jsxs","Comments","_useState","_useState2","_slicedToArray","backendComments","setBackendComments","_useState3","_useState4","currentUser","setCurrentUser","_useState5","_useState6","activeComment","setActiveComment","rootComments","filter","backendComment","parentId","getReplies","commentId","sort","a","b","Date","lastModifiedDate","getTime","then","response","catch","error","console","log","errorMessage","addComment","text","arguments","length","undefined","updateContent","body","updateComment","id","deleteComment","window","confirm","className","children","style","margin","submitLabel","handleSubmit","map","rootComment","comment","replies"],"sources":["/Users/minhyeok/Desktop/LostarkTodo/Front/src/comments/Comments.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { call } from \"../service/api-service\";\nimport './Comments.css';\nimport Comment from \"./Commnet\";\nimport CommentForm from \"./CommentForm\";\nimport Info from \"../components/Info\";\n\nconst Comments = () => {\n    const [backendComments, setBackendComments] = useState([]);\n    const [currentUser, setCurrentUser] = useState([]);\n    const [activeComment, setActiveComment] = useState(null);\n    const rootComments = backendComments.filter(\n        (backendComment) => backendComment.parentId === 0\n    );\n    const getReplies = (commentId) =>\n        backendComments\n            .filter((backendComment) => backendComment.parentId === commentId)\n            .sort(\n                (a, b) =>\n                    new Date(a.lastModifiedDate).getTime() - new Date(b.lastModifiedDate).getTime()\n            );\n\n    useEffect(() => {\n        call(\"/member\", \"GET\", null)\n            .then((response) => {\n                setCurrentUser(response);\n            })\n            .catch((error) => { console.log(error.errorMessage) });\n        // 초기 캐릭터 정보 불러오기\n        call(\"/comments\", \"GET\", null)\n            .then((response) => {\n                setBackendComments(response);\n            })\n            .catch((error) => { console.log(error.errorMessage) });\n\n    }, []);\n\n    const addComment = (text, parentId = null) => {\n        const updateContent = {\n            body: text,\n            parentId: parentId\n        };\n        call(\"/comments\", \"POST\", updateContent)\n            .then((response) => {\n                setBackendComments(response);\n                setActiveComment(null);\n            })\n            .catch((error) => { console.log(error.errorMessage) });\n    };\n\n    const updateComment = (text, commentId) => {\n        const updateContent = {\n            body: text,\n            id: commentId\n        };\n        call(\"/comments\", \"PATCH\", updateContent)\n            .then((response) => {\n                setBackendComments(response);\n                setActiveComment(null);\n            })\n            .catch((error) => {\n                console.log(error.errorMessage)\n            });\n    };\n\n    const deleteComment = (commentId) => {\n        const updateContent = {\n            id: commentId,\n        };\n        if (window.confirm(\"삭제하시겠습니까?\")) {\n            call(\"/comments\", \"DELETE\", updateContent)\n                .then((response) => {\n                    setBackendComments(response);\n                })\n                .catch((error) => { console.log(error.errorMessage) });\n        }\n    };\n\n    return (\n        <div className=\"comments\">\n            <div>\n                <h3 style={{ margin: 0 }}>2023.10.01</h3>\n                <strong>캐릭터 업데이트 기능이 수정되었습니다.</strong><br />\n                화면 오른쪽 하단 \"+\"버튼에서 사용하실 수 있습니다<br />\n            </div>\n            <Info />\n\n            <div>\n                <h3>개발 예정</h3>\n                <ul>\n                    <li><strong>주간 에포나, 토벌전 등 원정대 단위 숙제 추가</strong></li>\n                    <li><strong>2주 쿨타임 레이드 체크</strong> - 사람들마다 플레이하는 방식이 달라, 최대한 많은 분들의 요구사항을 만족할 수 있고 편하게 쓰실 수 있는 방법을 고안중입니다.(좀 걸릴것 같습니다..ㅠㅠ) </li>\n                    <li><strong>기록남기기</strong> - 숙제로 얻은 수익을 기록하여 그래프 혹은 표로 볼 수있게 하려고 합니다. </li>\n                    <li><strong>데이터보기</strong> - 일일숙제로 얻는 재화량 통계와 현재 경매장 시세를 확인할 수 있게 하려고 합니다. </li>\n                </ul>\n            </div>\n            <h3 className=\"comments-title\">방명록</h3>\n            <div className=\"comment-form-title\">\n                <p>하고싶으신 말씀 남겨주시면 됩니다</p>\n            </div>\n            <CommentForm submitLabel=\"Write\" handleSubmit={addComment} />\n            <div className=\"comments-container\">\n                {rootComments.map((rootComment) => (\n                    <Comment\n                        key={rootComment.id}\n                        comment={rootComment}\n                        replies={getReplies(rootComment.id)}\n                        activeComment={activeComment}\n                        setActiveComment={setActiveComment}\n                        addComment={addComment}\n                        deleteComment={deleteComment}\n                        updateComment={updateComment}\n                        currentUser={currentUser}\n                    />\n                ))}\n\n            </div>\n        </div>\n    );\n};\n\nexport default Comments;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}