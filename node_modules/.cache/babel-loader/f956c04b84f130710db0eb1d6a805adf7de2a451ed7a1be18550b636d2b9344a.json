{"ast":null,"code":"import CommentForm from\"./CommentForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Comment=function Comment(_ref){var comment=_ref.comment,replies=_ref.replies,setActiveComment=_ref.setActiveComment,activeComment=_ref.activeComment,updateComment=_ref.updateComment,deleteComment=_ref.deleteComment,addComment=_ref.addComment,_ref$parentId=_ref.parentId,parentId=_ref$parentId===void 0?null:_ref$parentId,currentUser=_ref.currentUser;var isEditing=activeComment&&activeComment.id===comment.id&&activeComment.type===\"editing\";var isReplying=activeComment&&activeComment.id===comment.id&&activeComment.type===\"replying\";var canDelete=currentUser.id===comment.memberId&&replies.length===0;var canReply=currentUser.role===\"ADMIN\"||\"PUBLISHER\"||currentUser.id===comment.memberId;var canEdit=currentUser.id===comment.memberId;var replyId=parentId?parentId:comment.id;var lastModifiedDate=new Date(comment.lastModifiedDate).toLocaleString();var username=\"\";if(comment.role===\"ADMIN\"){username=\"관리자\";}else if(comment.role===\"PUBLISHER\"){username=\"UI담당자\";}else{username=comment.username.substring(0,5)+'*'.repeat(comment.username.length-5);}return/*#__PURE__*/_jsxs(\"div\",{className:\"comment\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comment-image-container\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/user-icon.png\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-right-part\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comment-content\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"comment-author\",style:{color:comment.role===\"ADMIN\"?\"blue\":\"\"},children:username}),\"(\",lastModifiedDate,\")\"]})}),!isEditing&&/*#__PURE__*/_jsx(\"div\",{className:\"comment-text\",children:comment.body}),isEditing&&/*#__PURE__*/_jsx(CommentForm,{submitLabel:\"Update\",hasCancelButton:true,initialText:comment.body,handleSubmit:function handleSubmit(text){return updateComment(text,comment.id);},handleCancel:function handleCancel(){setActiveComment(null);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-actions\",children:[canReply&&/*#__PURE__*/_jsx(\"div\",{className:\"comment-action\",onClick:function onClick(){return setActiveComment({id:comment.id,type:\"replying\"});},children:\"Reply\"}),canEdit&&/*#__PURE__*/_jsx(\"div\",{className:\"comment-action\",onClick:function onClick(){return setActiveComment({id:comment.id,type:\"editing\"});},children:\"Edit\"}),canDelete&&/*#__PURE__*/_jsx(\"div\",{className:\"comment-action\",onClick:function onClick(){return deleteComment(comment.id);},children:\"Delete\"})]}),isReplying&&/*#__PURE__*/_jsx(CommentForm,{submitLabel:\"Reply\",handleSubmit:function handleSubmit(text){return addComment(text,replyId);}}),replies.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"replies\",children:replies.map(function(reply){return/*#__PURE__*/_jsx(Comment,{comment:reply,setActiveComment:setActiveComment,activeComment:activeComment,updateComment:updateComment,deleteComment:deleteComment,addComment:addComment,parentId:comment.id,replies:[],currentUser:currentUser},reply.id);})})]})]},comment.id);};export default Comment;","map":{"version":3,"names":["CommentForm","jsx","_jsx","jsxs","_jsxs","Comment","_ref","comment","replies","setActiveComment","activeComment","updateComment","deleteComment","addComment","_ref$parentId","parentId","currentUser","isEditing","id","type","isReplying","canDelete","memberId","length","canReply","role","canEdit","replyId","lastModifiedDate","Date","toLocaleString","username","substring","repeat","className","children","src","style","color","body","submitLabel","hasCancelButton","initialText","handleSubmit","text","handleCancel","onClick","map","reply"],"sources":["/Users/minhyeok/Desktop/LostarkTodo/Front/src/comments/Commnet.js"],"sourcesContent":["import CommentForm from \"./CommentForm\";\n\nconst Comment = ({\n  comment,\n  replies,\n  setActiveComment,\n  activeComment,\n  updateComment,\n  deleteComment,\n  addComment,\n  parentId = null,\n  currentUser\n}) => {\n  const isEditing =\n    activeComment &&\n    activeComment.id === comment.id &&\n    activeComment.type === \"editing\";\n  const isReplying =\n    activeComment &&\n    activeComment.id === comment.id &&\n    activeComment.type === \"replying\";\n  const canDelete =\n    (currentUser.id === comment.memberId && replies.length === 0);\n  const canReply = (currentUser.role === \"ADMIN\" || \"PUBLISHER\") || (currentUser.id === comment.memberId);\n  const canEdit = currentUser.id === comment.memberId;\n  const replyId = parentId ? parentId : comment.id;\n  const lastModifiedDate = new Date(comment.lastModifiedDate).toLocaleString();\n  var username = \"\";\n  if (comment.role === \"ADMIN\") {\n    username = \"관리자\";\n  } else if (comment.role === \"PUBLISHER\") {\n    username = \"UI담당자\";\n  } else {\n    username = comment.username.substring(0, 5) + '*'.repeat(comment.username.length - 5);\n  }\n\n  return (\n    <div key={comment.id} className=\"comment\">\n      <div className=\"comment-image-container\">\n        <img src=\"/user-icon.png\" />\n      </div>\n      <div className=\"comment-right-part\">\n        <div className=\"comment-content\">\n          <div>\n            <span className=\"comment-author\"\n              style={{ color: comment.role === \"ADMIN\" ? \"blue\" : \"\" }}\n            >{username}</span>({lastModifiedDate})\n          </div>\n        </div>\n        {!isEditing && <div className=\"comment-text\">{comment.body}</div>}\n        {isEditing && (\n          <CommentForm\n            submitLabel=\"Update\"\n            hasCancelButton\n            initialText={comment.body}\n            handleSubmit={(text) => updateComment(text, comment.id)}\n            handleCancel={() => {\n              setActiveComment(null);\n            }}\n          />\n        )}\n        <div className=\"comment-actions\">\n          {canReply && (\n            <div\n              className=\"comment-action\"\n              onClick={() =>\n                setActiveComment({ id: comment.id, type: \"replying\" })\n              }\n            >\n              Reply\n            </div>\n          )}\n          {canEdit && (\n            <div\n              className=\"comment-action\"\n              onClick={() =>\n                setActiveComment({ id: comment.id, type: \"editing\" })\n              }\n            >\n              Edit\n            </div>\n          )}\n          {canDelete && (\n            <div\n              className=\"comment-action\"\n              onClick={() => deleteComment(comment.id)}\n            >\n              Delete\n            </div>\n          )}\n        </div>\n        {isReplying && (\n          <CommentForm\n            submitLabel=\"Reply\"\n            handleSubmit={(text) => addComment(text, replyId)}\n          />\n        )}\n        {replies.length > 0 && (\n          <div className=\"replies\">\n            {replies.map((reply) => (\n              <Comment\n                comment={reply}\n                key={reply.id}\n                setActiveComment={setActiveComment}\n                activeComment={activeComment}\n                updateComment={updateComment}\n                deleteComment={deleteComment}\n                addComment={addComment}\n                parentId={comment.id}\n                replies={[]}\n                currentUser={currentUser}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Comment;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}