{"ast":null,"code":"import CommentForm from\"./CommentForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Comment=function Comment(_ref){var comment=_ref.comment,replies=_ref.replies,setActiveComment=_ref.setActiveComment,activeComment=_ref.activeComment,updateComment=_ref.updateComment,deleteComment=_ref.deleteComment,addComment=_ref.addComment,_ref$parentId=_ref.parentId,parentId=_ref$parentId===void 0?null:_ref$parentId,currentUser=_ref.currentUser;var isEditing=activeComment&&activeComment.id===comment.id&&activeComment.type===\"editing\";var isReplying=activeComment&&activeComment.id===comment.id&&activeComment.type===\"replying\";var canDelete=currentUser.username===comment.username&&replies.length===0;var canReply=currentUser.role===\"ADMIN\"||currentUser.username===comment.username;var canEdit=currentUser.username===comment.username;var replyId=parentId?parentId:comment.id;var lastModifiedDate=new Date(comment.lastModifiedDate).toLocaleDateString();var username=comment.role===\"ADMIN\"?\"관리자\":comment.username.substring(0,5)+'*'.repeat(comment.username.length-5);return/*#__PURE__*/_jsxs(\"div\",{className:\"comment\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comment-image-container\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/user-icon.png\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-right-part\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comment-content\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"comment-author\",style:{color:comment.role===\"ADMIN\"?\"blue\":\"\"},children:username}),\"(\",lastModifiedDate,\")\"]})}),!isEditing&&/*#__PURE__*/_jsx(\"div\",{className:\"comment-text\",children:comment.body}),isEditing&&/*#__PURE__*/_jsx(CommentForm,{submitLabel:\"Update\",hasCancelButton:true,initialText:comment.body,handleSubmit:function handleSubmit(text){return updateComment(text,comment.id);},handleCancel:function handleCancel(){setActiveComment(null);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-actions\",children:[canReply&&/*#__PURE__*/_jsx(\"div\",{className:\"comment-action\",onClick:function onClick(){return setActiveComment({id:comment.id,type:\"replying\"});},children:\"Reply\"}),canEdit&&/*#__PURE__*/_jsx(\"div\",{className:\"comment-action\",onClick:function onClick(){return setActiveComment({id:comment.id,type:\"editing\"});},children:\"Edit\"}),canDelete&&/*#__PURE__*/_jsx(\"div\",{className:\"comment-action\",onClick:function onClick(){return deleteComment(comment.id);},children:\"Delete\"})]}),isReplying&&/*#__PURE__*/_jsx(CommentForm,{submitLabel:\"Reply\",handleSubmit:function handleSubmit(text){return addComment(text,replyId);}}),replies.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"replies\",children:replies.map(function(reply){return/*#__PURE__*/_jsx(Comment,{comment:reply,setActiveComment:setActiveComment,activeComment:activeComment,updateComment:updateComment,deleteComment:deleteComment,addComment:addComment,parentId:comment.id,replies:[],currentUser:currentUser},reply.id);})})]})]},comment.id);};export default Comment;","map":{"version":3,"names":["CommentForm","jsx","_jsx","jsxs","_jsxs","Comment","_ref","comment","replies","setActiveComment","activeComment","updateComment","deleteComment","addComment","_ref$parentId","parentId","currentUser","isEditing","id","type","isReplying","canDelete","username","length","canReply","role","canEdit","replyId","lastModifiedDate","Date","toLocaleDateString","substring","repeat","className","children","src","style","color","body","submitLabel","hasCancelButton","initialText","handleSubmit","text","handleCancel","onClick","map","reply"],"sources":["/Users/minhyeok/Desktop/LostarkTodo/Front/src/comments/Commnet.js"],"sourcesContent":["import CommentForm from \"./CommentForm\";\n\nconst Comment = ({\n  comment,\n  replies,\n  setActiveComment,\n  activeComment,\n  updateComment,\n  deleteComment,\n  addComment,\n  parentId = null,\n  currentUser\n}) => {\n  const isEditing =\n    activeComment &&\n    activeComment.id === comment.id &&\n    activeComment.type === \"editing\";\n  const isReplying =\n    activeComment &&\n    activeComment.id === comment.id &&\n    activeComment.type === \"replying\";\n  const canDelete =\n    (currentUser.username === comment.username && replies.length === 0);\n  const canReply = (currentUser.role === \"ADMIN\") || (currentUser.username === comment.username);\n  const canEdit = currentUser.username === comment.username;\n  const replyId = parentId ? parentId : comment.id;\n  const lastModifiedDate = new Date(comment.lastModifiedDate).toLocaleDateString();\n  const username = comment.role === \"ADMIN\"? \"관리자\" : comment.username.substring(0, 5) + '*'.repeat(comment.username.length - 5);\n\n  return (\n    <div key={comment.id} className=\"comment\">\n      <div className=\"comment-image-container\">\n        <img src=\"/user-icon.png\" />\n      </div>\n      <div className=\"comment-right-part\">\n        <div className=\"comment-content\">\n          <div>\n            <span className=\"comment-author\"\n              style={{color: comment.role === \"ADMIN\" ?  \"blue\" : \"\"}}\n            >{username}</span>({lastModifiedDate})\n          </div>\n        </div>\n        {!isEditing && <div className=\"comment-text\">{comment.body}</div>}\n        {isEditing && (\n          <CommentForm\n            submitLabel=\"Update\"\n            hasCancelButton\n            initialText={comment.body}\n            handleSubmit={(text) => updateComment(text, comment.id)}\n            handleCancel={() => {\n              setActiveComment(null);\n            }}\n          />\n        )}\n        <div className=\"comment-actions\">\n          {canReply && (\n            <div\n              className=\"comment-action\"\n              onClick={() =>\n                setActiveComment({ id: comment.id, type: \"replying\" })\n              }\n            >\n              Reply\n            </div>\n          )}\n          {canEdit && (\n            <div\n              className=\"comment-action\"\n              onClick={() =>\n                setActiveComment({ id: comment.id, type: \"editing\" })\n              }\n            >\n              Edit\n            </div>\n          )}\n          {canDelete && (\n            <div\n              className=\"comment-action\"\n              onClick={() => deleteComment(comment.id)}\n            >\n              Delete\n            </div>\n          )}\n        </div>\n        {isReplying && (\n          <CommentForm\n            submitLabel=\"Reply\"\n            handleSubmit={(text) => addComment(text, replyId)}\n          />\n        )}\n        {replies.length > 0 && (\n          <div className=\"replies\">\n            {replies.map((reply) => (\n              <Comment\n                comment={reply}\n                key={reply.id}\n                setActiveComment={setActiveComment}\n                activeComment={activeComment}\n                updateComment={updateComment}\n                deleteComment={deleteComment}\n                addComment={addComment}\n                parentId={comment.id}\n                replies={[]}\n                currentUser={currentUser}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Comment;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}